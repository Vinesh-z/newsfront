<div class="jumbotron jumbotron-fluid">
  <div class="container text-center">
    <h1 class="display-3">Assign Roles to Users</h1>
    <form>
      <input type="text" class="form-control search-input" #searchKey placeholder="Search email id...">
      <button class="btn btn-primary" (click)="searchEmail(searchKey.value);">Search</button>
      <button class="btn btn-danger" *ngIf="searchSet" (click)="searchSet = false; ngOnInit();">Cancel Search</button>
    </form>
  </div>
</div>
<div class="container">
  <table class="table" *ngIf="allUsersLoaded && allUsers.length>0">
    <thead class="thead-dark">
      <tr>
        <th>Email ID</th>
        <th>Username</th>
        <th>Current Role</th>
        <th>Choose Roles</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let user of allUsers">
          <tr *ngIf="user.emailId!=userData.emailId">
              <td>{{ user.emailId }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.groupName }}</td>
              <td>
                <select name="" id="" (change)="onChange($event)">
                    <option  value="Select">Select New Role</option>
                    <ng-container *ngFor="let gr of user.groups">
                        <option *ngIf="gr._id!=user.groupId" [value]="[gr._id,user.userId]">{{gr.name}}</option>
                    </ng-container>
                </select>
              </td>
            </tr>
      </ng-container>
      
    </tbody>
  </table>
</div>